{"version":3,"sources":["webpack:///./src/assets/image/icon_like.png","webpack:///./node_modules/core-js/modules/_array-fill.js","webpack:///./src/assets/image/icon_hate.png","webpack:///./src/components/pingjia.vue?1f72","webpack:///./src/views/chat.vue?94bc","webpack:///./node_modules/core-js/modules/es6.array.fill.js","webpack:///./src/views/chat.vue?7b49","webpack:///./src/assets/js/chatCanvas.js","webpack:///./src/components/pingjia.vue?dc45","webpack:///src/components/pingjia.vue","webpack:///./src/components/pingjia.vue?363e","webpack:///./src/components/pingjia.vue","webpack:///src/views/chat.vue","webpack:///./src/views/chat.vue?2474","webpack:///./src/views/chat.vue"],"names":["module","exports","__webpack_require__","p","toObject","toAbsoluteIndex","toLength","value","O","this","length","aLen","arguments","index","undefined","end","endPos","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_pingjia_vue_vue_type_style_index_0_id_b6cd33f8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_pingjia_vue_vue_type_style_index_0_id_b6cd33f8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_style_index_0_id_d3877c1e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_style_index_0_id_d3877c1e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","$export","P","fill","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","border","attrs","id","_v","src","alt","_s","question","_l","item","key","class","type","myAvatar","friendAvatar","text","directives","name","rawName","expression","domProps","on","input","$event","target","composing","msgText","click","sendMsg","remainProgress","time","title","_e","pingjia-click","setPingJIa","staticRenderFns","chatCanvas","canvasNode","progressTime","c","waveWidth","width","offset","waveHeight","waveCount","startX","startY","height","progress","progressStep","d2","d","hd","ctx","getContext","tick","fillStyle","fillRect","textX","textY","font","startCount","i","devicePixelRatio","fillText","beginPath","arc","Math","PI","offsetY","moveTo","dx","offsetX","quadraticCurveTo","lineTo","requestAnimationFrame","console","log","pingjiavue_type_template_id_b6cd33f8_scoped_true_render","pingJiaFn","pingjiavue_type_template_id_b6cd33f8_scoped_true_staticRenderFns","pingjiavue_type_script_lang_js_","props","methods","$emit","components_pingjiavue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","pingjia","chatvue_type_script_lang_js_","data","Ques","message","msgs","socket","tipStatus","components","Tip","PingJia","getQ","floor","random","evt","_this","$axios","post","chatId","$store","state","evaluate","then","res","code","$router","push","params","msg","catch","error","initial","_this2","WebSocket","token","onopen","document","getElementById","disabled","onmessage","JSON","parse","onerror","onclose","send","getAvatars","mySex","getters","getAvatarArr","boy","girl","friendSex","watch","handler","newValue","oldValue","close","deep","created","mounted","node","window","screen","views_chatvue_type_script_lang_js_","chat_component","__webpack_exports__"],"mappings":"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","file":"js/lazy-loaded-component.8d5dc883.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/icon_like.e22003a9.png\";","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var aLen = arguments.length;\n  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);\n  var end = aLen > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","module.exports = __webpack_public_path__ + \"img/icon_hate.926d7e7f.png\";","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./pingjia.vue?vue&type=style&index=0&id=b6cd33f8&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./pingjia.vue?vue&type=style&index=0&id=b6cd33f8&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chat.vue?vue&type=style&index=0&id=d3877c1e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chat.vue?vue&type=style&index=0&id=d3877c1e&scoped=true&lang=css&\"","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', { fill: require('./_array-fill') });\n\nrequire('./_add-to-unscopables')('fill');\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('canvas',{staticStyle:{\"border\":\"0\"},attrs:{\"id\":\"myCanvas\"}},[_vm._v(\"Your browser does not support the HTML5 canvas tag.\\n    \")]),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"title\"},[_c('img',{attrs:{\"src\":require(\"../assets/image/boy.png\"),\"alt\":\"\"}}),_c('p',[_vm._v(_vm._s(_vm.question))])]),_c('ul',_vm._l((_vm.msgs),function(item,index){return _c('li',{key:index},[_c('div',{class:[item.type === 'send' ? 'send-wrap' : 'recive-wrap']},[_c('img',{staticClass:\"head-img\",attrs:{\"src\":item.type === 'send' ? _vm.myAvatar : _vm.friendAvatar,\"alt\":\"headImg\"}}),_c('div',{staticClass:\"message-wrap\"},[_vm._v(_vm._s(item.text))])])])})),_c('div',{staticClass:\"bt-wrap\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.msgText),expression:\"msgText\"}],attrs:{\"type\":\"text\",\"name\":\"sendText\"},domProps:{\"value\":(_vm.msgText)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.msgText=$event.target.value}}}),_c('button',{attrs:{\"id\":\"sendBT\"},on:{\"click\":function($event){_vm.sendMsg()}}},[_vm._v(\"发送\")])])]),(_vm.remainProgress.time < 60 && _vm.remainProgress.time >= 59)?_c('tip',{attrs:{\"title\":\"还剩一分钟哦!\"}}):_vm._e(),(_vm.remainProgress.time <= 0)?_c('ping-jia',{attrs:{\"title\":\"聊天结束了啦，评价一下TA吧～\"},on:{\"pingjia-click\":function($event){_vm.setPingJIa($event)}}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function (canvasNode, progressTime) {\n  let c = canvasNode\n  let waveWidth = c.width + c.width / 4\n  let offset = 0\n  let waveHeight = 8\n  let waveCount = 5 // 波浪数影响绘图\n  let startX = -c.width / 4\n  let startY = c.height + 5\n  let progress = c.height + 10\n  let progressStep = c.height / (180 * 60)\n  progressTime.time = progress / (progressStep * 60)\n  // progressTime.step = progressStep\n  let d2 = waveWidth / waveCount\n  let d = d2 / 2\n  let hd = d / 2\n  let ctx = c.getContext('2d')\n  console.log(c.height + '  ' + c.width)\n\n  function tick () {\n    offset -= 2\n    progress -= progressStep\n    progressTime.time = progress / (progressStep * 60)\n    if (progress < 0) return\n    if (-1 * offset >= d2) offset = 0\n    ctx.fillStyle = '#ffecec'\n    ctx.fillRect(0, 0, c.width, c.height)\n    let textX = 0\n    let textY = c.height / 6\n    /** draw count */\n    ctx.font = '20px Georgia'\n    ctx.fillStyle = '#ccb8ba'\n    for (let startCount = 180, i = 0; startCount > 0; i++) {\n      if (i < 3) {\n        textX = c.width / 2 - (30 / devicePixelRatio)\n      } else {\n        textX = c.width / 2 - (20 / devicePixelRatio)\n      }\n      ctx.fillText(startCount + '', textX, textY * i + 15)\n      startCount -= 30\n    }\n    ctx.beginPath()\n    ctx.arc(c.width / 2, c.height - 5, 5, 0, 2 * Math.PI)\n    ctx.fillStyle = '#ff3636'\n    ctx.fill()\n\n    /** draw wave */\n    ctx.beginPath()\n    let offsetY = startY - progress\n    ctx.moveTo(startX - offset, offsetY)\n    for (let i = 0; i < waveCount; i++) {\n      let dx = i * d2\n      let offsetX = dx + startX - offset\n      ctx.quadraticCurveTo(offsetX + hd, offsetY + waveHeight, offsetX + d, offsetY)\n      ctx.quadraticCurveTo(offsetX + hd + d, offsetY - waveHeight, offsetX + d2, offsetY)\n    }\n    ctx.lineTo(startX + waveWidth, c.height)\n    ctx.lineTo(startX, c.height)\n    ctx.fillStyle = '#94cdf0'\n    ctx.fill()\n    requestAnimationFrame(tick)\n  }\n  tick()\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tip-containner\"},[_c('p',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.title))]),_c('div',[_c('div',{staticClass:\"avatar-wrap\"},[_c('img',{attrs:{\"id\":\"like\",\"src\":require(\"../assets/image/icon_like.png\"),\"alt\":\"like\"},on:{\"click\":function($event){_vm.pingJiaFn(0)}}}),_c('span',[_vm._v(\"喜欢,还想聊\")])]),_c('div',{staticClass:\"avatar-wrap\"},[_c('img',{attrs:{\"id\":\"dislike\",\"src\":require(\"../assets/image/icon_hate.png\"),\"alt\":\"hate\"},on:{\"click\":function($event){_vm.pingJiaFn(1)}}}),_c('span',[_vm._v(\"错过吧,告辞\")])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"tip-containner\">\n    <p class=\"title\">{{title}}</p>\n    <div>\n      <div class=\"avatar-wrap\">\n        <img id=\"like\" @click=\"pingJiaFn(0)\" src=\"../assets/image/icon_like.png\" alt=\"like\">\n        <span>喜欢,还想聊</span>\n      </div>\n      <div class=\"avatar-wrap\">\n        <img id=\"dislike\" @click=\"pingJiaFn(1)\" src=\"../assets/image/icon_hate.png\" alt=\"hate\">\n        <span>错过吧,告辞</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: ['title'],\n  methods: {\n    pingJiaFn (value) {\n      this.$emit('pingjia-click', value)\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .tip-containner{\n    width: 80vw;\n    height: 28vh;\n    background-color: white;\n    border-radius: 16px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: space-around;\n    padding: 1px;\n    background: -webkit-linear-gradient( bottom, #fff 0%, #fff 100%), -webkit-linear-gradient( bottom, #60d0e8 0%, #ff8599 100%);\n    background-clip: content-box, padding-box;\n    z-index: 999;\n  }\n  .title{\n    margin-top: 10px;\n    font-family: PingFang-SC-Regular;\n    font-size: 2.2vh;\n    font-weight: normal;\n    font-stretch: normal;\n    letter-spacing: 0px;\n    color: #dc7474;\n  }\n  .tip-containner > div{\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-around;\n  }\n  .avatar-wrap{\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    align-items: center;\n  }\n  .avatar-wrap > img{\n    width: 18vw;\n    height: 18vw;\n    border: 1px solid white;\n    border-radius: 50%;\n  }\n  .avatar-wrap > #like:hover{\n    border: 2px solid #ff8599;\n  }\n  .avatar-wrap > #dislike:hover{\n    border: 2px solid #60d0e8;\n  }\n  .avatar-wrap > span{\n    padding: 10px;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./pingjia.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./pingjia.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./pingjia.vue?vue&type=template&id=b6cd33f8&scoped=true&\"\nimport script from \"./pingjia.vue?vue&type=script&lang=js&\"\nexport * from \"./pingjia.vue?vue&type=script&lang=js&\"\nimport style0 from \"./pingjia.vue?vue&type=style&index=0&id=b6cd33f8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b6cd33f8\",\n  null\n  \n)\n\ncomponent.options.__file = \"pingjia.vue\"\nexport default component.exports","<template>\n    <div class=\"wrap\">\n        <canvas id=\"myCanvas\" style=\"border: 0\">Your browser does not support the HTML5 canvas tag.\n        </canvas>\n        <div class=\"container\">\n          <div class=\"title\">\n            <img src=\"../assets/image/boy.png\" alt=\"\">\n            <p>{{question}}</p>\n          </div>\n           <ul>\n             <li v-for=\"(item, index) of msgs\" :key=\"index\">\n               <div :class=\"[item.type === 'send' ? 'send-wrap' : 'recive-wrap']\">\n                 <img class=\"head-img\" :src=\"item.type === 'send' ? myAvatar : friendAvatar\" alt=\"headImg\" />\n                 <div class=\"message-wrap\">{{item.text}}</div>\n               </div>\n             </li>\n           </ul>\n           <div class=\"bt-wrap\">\n             <input type=\"text\" name=\"sendText\" v-model=\"msgText\">\n             <button id=\"sendBT\" @click=\"sendMsg()\">发送</button>\n           </div>\n        </div>\n        <tip title=\"还剩一分钟哦!\" v-if=\"remainProgress.time < 60 && remainProgress.time >= 59\"></tip>\n        <ping-jia v-if=\"remainProgress.time <= 0\" @pingjia-click=\"setPingJIa($event)\" title=\"聊天结束了啦，评价一下TA吧～\"></ping-jia>\n    </div>\n</template>\n\n<script>\nimport backgroundCanvasFn from '../assets/js/chatCanvas'\nimport Tip from '../components/Tip'\nimport PingJia from '../components/pingjia'\nexport default {\n  data () {\n    return {\n      Ques: [\n        '有什么好玩的游戏推荐？',\n        '分享一部你最喜欢的电影',\n        '这个假期里你经历过什么有意思的事情？',\n        '分享一个你自己特有的小技能？',\n        '或许可以从你最喜欢的小动物开始聊',\n        '介绍介绍你喜欢用的小众app吧！',\n        '可以分享一下假期里有意义的事情吗？',\n        '夏天你有什么解暑续命大法？',\n        '也许可以从聊聊你们的专业开始',\n        '或许可以先来聊聊你们最近在看的书？',\n        '或许可以从聊喜欢的音乐开始',\n        '可以从最近在玩的游戏开始聊',\n        '或许可以聊聊你喜不喜欢现在的专业？'\n      ],\n      question: '',\n      message: '1.随机匹配 ，优先男女2.如遇违规,长按举报3.时间不定，喜欢抓紧4.多次好评，无限匹配5.随机奖励，加时续命',\n      msgs: [],\n      socket: null,\n      msgText: '',\n      remainProgress: {\n        time: 180\n      },\n      tipStatus: false,\n      pingjia: null,\n      myAvatar: null,\n      friendAvatar: null\n    }\n  },\n  components: {\n    Tip,\n    PingJia\n  },\n  methods: {\n    getQ () {\n      let index = Math.floor((Math.random() * this.Ques.length))\n      this.question = this.Ques[index]\n    },\n    setPingJIa (evt) {\n      this.pingjia = evt\n      this.$axios.post('/api/evaluate', {\n        chatId: this.$store.state.chatId,\n        evaluate: this.pingjia\n      }).then((res) => {\n        if (res.data.code === 0) {\n          this.$router.push({ name: 'index', params: { msg: 'pingjia' } })\n        } else {\n          console.log(res.data.msg)\n        }\n      }).catch((error) => {\n        console.log(error + '')\n      })\n    },\n    initial () {\n      this.socket = new WebSocket('ws://120.27.137.151:9976/api/ws?token=' + this.$store.state.token)\n      this.socket.onopen = (evt) => {\n        document.getElementById('sendBT').disabled = false\n      }\n      this.socket.onmessage = (evt) => {\n        let res = JSON.parse(evt.data)\n        this.msgs.push({\n          text: res.msg,\n          type: 'recive'\n        })\n        console.log(res)\n      }\n      this.socket.onerror = (evt) => {\n        console.error(evt)\n        document.getElementById('sendBT').disabled = true\n      }\n      this.socket.onclose = (evt) => {\n        document.getElementById('sendBT').disabled = true\n      }\n    },\n    sendMsg () {\n      if (this.msgText !== '') {\n        this.socket.send(this.msgText)\n        this.msgs.push({\n          text: this.msgText,\n          type: 'send'\n        })\n        this.msgText = ''\n      }\n    },\n    getAvatars () {\n      let random = Math.floor(2 * Math.random())\n      if (this.$store.state.mySex === 0) {\n        this.myAvatar = this.$store.getters.getAvatarArr(random).boy\n      } else {\n        this.myAvatar = this.$store.getters.getAvatarArr(random).girl\n      }\n      if (this.$store.state.friendSex === 0) {\n        this.friendAvatar = this.$store.getters.getAvatarArr(random).boy\n      } else {\n        this.friendAvatar = this.$store.getters.getAvatarArr(random).girl\n      }\n    }\n  },\n  watch: {\n    remainProgress: {\n      handler (newValue, oldValue) {\n        if (newValue < 0) {\n          this.socket.close()\n        }\n      },\n      deep: true\n    }\n  },\n  created () {\n    this.initial()\n    this.getQ()\n    this.getAvatars()\n  },\n  mounted () {\n    let node = document.getElementById('myCanvas')\n    node.width = window.screen.width\n    node.height = window.screen.height\n    backgroundCanvasFn(node, this.remainProgress)\n  }\n}\n</script>\n\n<style scoped>\n  .wrap{\n    height: 100vh;\n  }\n  .container{\n    position: absolute;\n    top: 0;\n    z-index: 1;\n    background-color: transparent;\n    width: 100vw;\n    height: 100vh;\n    overflow: hidden;\n  }\n  .container > ul > li{\n    margin: 15px 0;\n  }\n  .container > ul > li > div{\n    display: flex;\n  }\n  .send-wrap{\n    flex-direction: row-reverse;\n  }\n  .recive-wrap{\n    flex-direction: row;\n  }\n  .head-img{\n    width: 15vw;\n    height: 15vw;\n    border-radius: 50%;\n    margin: 0 3vw;\n  }\n  .message-wrap{\n    box-sizing: border-box;\n    font-size: 2vh;\n    background-color: #ffffff;\n    border: 1px solid #ffb5b5;\n    border-radius: 8px;\n    padding: 6px;\n    max-width: 50vw;\n    display: flex;\n    align-items: center;\n    word-break: break-all;\n  }\n  .title{\n    display: flex;\n    flex-direction: row;\n    max-width: 70vw;\n    overflow: hidden;\n    height: 8vw;\n    background-color: white;\n    border: 0;\n    border-radius: 5vh;\n    margin: 0 auto;\n    margin-top: 20px;\n    margin-bottom: 20px;\n    font-family: PingFang-SC-Regular;\n    font-size: 16px;\n    font-weight: normal;\n    font-stretch: normal;\n    letter-spacing: 0px;\n    color: #dc7474;\n  }\n  .title > img{\n    width: 8vw;\n    height: 8vw;\n  }\n  .title > p{\n    height: 100%;\n    padding-left: 2vw;\n    line-height: 8vw;\n  }\n  .bt-wrap{\n    width: 90vw;\n    position: fixed;\n    left: 50%;\n    margin-left: -45vw;\n    bottom: 4vh;\n    display: flex;\n    justify-content: space-between;\n  }\n  .bt-wrap > input{\n    width: 75vw;\n    height: 5vh;\n    border: 0;\n    background-color: white;\n    border-radius: 8px;\n    padding-left: 5px;\n    font-family: PingFang-SC-Regular;\n    font-size: 1.9vh;\n    font-weight: normal;\n    font-stretch: normal;\n    letter-spacing: 0px;\n    color: #666666;\n\n  }\n  .bt-wrap > button{\n    width: 12vw;\n    height: 5vh;\n    border: 0;\n    border-radius: 8px;\n    background-color: #d66161;\n    font-family: PingFang-SC-Regular;\n    font-size: 1.9vh;\n    font-weight: normal;\n    font-stretch: normal;\n    letter-spacing: 0px;\n    color: #ffffff;\n  }\n  .bt-wrap > button:disabled{\n    background-color: gray;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./chat.vue?vue&type=template&id=d3877c1e&scoped=true&\"\nimport script from \"./chat.vue?vue&type=script&lang=js&\"\nexport * from \"./chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chat.vue?vue&type=style&index=0&id=d3877c1e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d3877c1e\",\n  null\n  \n)\n\ncomponent.options.__file = \"chat.vue\"\nexport default component.exports"],"sourceRoot":""}