{"version":3,"sources":["webpack:///./src/components/pingjia.vue?87f5","webpack:///./src/assets/image/icon_like.png","webpack:///./src/assets/image/icon_hate.png","webpack:///./node_modules/_core-js@2.5.7@core-js/modules/_array-fill.js","webpack:///./node_modules/_core-js@2.5.7@core-js/modules/es6.array.fill.js","webpack:///./src/views/chat.vue?ecb9","webpack:///./src/assets/js/chatCanvas.js","webpack:///./src/components/pingjia.vue?a03c","webpack:///src/components/pingjia.vue","webpack:///./src/components/pingjia.vue?43e3","webpack:///./src/components/pingjia.vue","webpack:///src/views/chat.vue","webpack:///./src/views/chat.vue?8d38","webpack:///./src/views/chat.vue","webpack:///./src/views/chat.vue?92c6"],"names":["_node_modules_mini_css_extract_plugin_0_4_2_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_0_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_4_2_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_2_1_6_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_1_2_2_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_4_2_vue_loader_lib_index_js_vue_loader_options_pingjia_vue_vue_type_style_index_0_id_489e4259_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_0_4_2_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_0_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_4_2_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_2_1_6_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_1_2_2_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_4_2_vue_loader_lib_index_js_vue_loader_options_pingjia_vue_vue_type_style_index_0_id_489e4259_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","module","exports","p","toObject","toAbsoluteIndex","toLength","value","O","this","length","aLen","arguments","index","undefined","end","endPos","$export","P","fill","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","border","attrs","id","_v","src","alt","_s","question","_l","item","key","class","type","myAvatar","friendAvatar","text","directives","name","rawName","expression","domProps","on","input","$event","target","composing","msgText","click","sendMsg","remainProgress","time","title","_e","pingjia-click","setPingJIa","staticRenderFns","chatCanvas","canvasNode","progressTime","c","waveWidth","width","offset","waveHeight","waveCount","startX","startY","height","progress","progressStep","d2","d","hd","ctx","getContext","tick","fillStyle","fillRect","textX","textY","font","startCount","i","devicePixelRatio","fillText","beginPath","arc","Math","PI","offsetY","moveTo","dx","offsetX","quadraticCurveTo","lineTo","requestAnimationFrame","console","log","pingjiavue_type_template_id_489e4259_scoped_true_render","pingJiaFn","pingjiavue_type_template_id_489e4259_scoped_true_staticRenderFns","pingjiavue_type_script_lang_js_","props","methods","$emit","components_pingjiavue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","pingjia","chatvue_type_script_lang_js_","data","Ques","message","msgs","socket","tipStatus","components","Tip","PingJia","getQ","floor","random","evt","_this","$axios","post","chatId","$store","state","evaluate","then","res","code","$router","push","params","msg","catch","error","initial","_this2","WebSocket","token","onopen","document","getElementById","disabled","onmessage","JSON","parse","onerror","onclose","send","getAvatars","mySex","getters","getAvatarArr","boy","girl","friendSex","watch","handler","newValue","oldValue","close","deep","created","mounted","node","window","screen","views_chatvue_type_script_lang_js_","chat_component","__webpack_exports__","_node_modules_mini_css_extract_plugin_0_4_2_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_0_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_4_2_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_2_1_6_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_1_2_2_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_4_2_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_style_index_0_id_24138ded_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_0_4_2_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_1_0_0_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_15_4_2_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_2_1_6_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_1_2_2_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_4_2_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_style_index_0_id_24138ded_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/lazy-loaded-component.3d3cd529.js","sourcesContent":["import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.4.2@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@1.0.0@css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@1.2.2@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./pingjia.vue?vue&type=style&index=0&id=489e4259&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.4.2@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@1.0.0@css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@1.2.2@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./pingjia.vue?vue&type=style&index=0&id=489e4259&scoped=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/icon_like.e22003a9.png\";","module.exports = __webpack_public_path__ + \"img/icon_hate.926d7e7f.png\";","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var aLen = arguments.length;\n  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);\n  var end = aLen > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', { fill: require('./_array-fill') });\n\nrequire('./_add-to-unscopables')('fill');\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('canvas',{staticStyle:{\"border\":\"0\"},attrs:{\"id\":\"myCanvas\"}},[_vm._v(\"Your browser does not support the HTML5 canvas tag.\\n    \")]),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"title\"},[_c('img',{attrs:{\"src\":require(\"../assets/image/boy.png\"),\"alt\":\"\"}}),_c('p',[_vm._v(_vm._s(_vm.question))])]),_c('ul',_vm._l((_vm.msgs),function(item,index){return _c('li',{key:index},[_c('div',{class:[item.type === 'send' ? 'send-wrap' : 'recive-wrap']},[_c('img',{staticClass:\"head-img\",attrs:{\"src\":item.type === 'send' ? _vm.myAvatar : _vm.friendAvatar,\"alt\":\"headImg\"}}),_c('div',{staticClass:\"message-wrap\"},[_vm._v(_vm._s(item.text))])])])})),_c('div',{staticClass:\"bt-wrap\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.msgText),expression:\"msgText\"}],attrs:{\"type\":\"text\",\"name\":\"sendText\"},domProps:{\"value\":(_vm.msgText)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.msgText=$event.target.value}}}),_c('button',{attrs:{\"id\":\"sendBT\"},on:{\"click\":function($event){_vm.sendMsg()}}},[_vm._v(\"发送\")])])]),(_vm.remainProgress.time < 60 && _vm.remainProgress.time >= 59)?_c('tip',{attrs:{\"title\":\"还剩一分钟哦!\"}}):_vm._e(),(_vm.remainProgress.time <= 0)?_c('ping-jia',{attrs:{\"title\":\"聊天结束了啦，评价一下TA吧～\"},on:{\"pingjia-click\":function($event){_vm.setPingJIa($event)}}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function (canvasNode, progressTime) {\r\n  let c = canvasNode\r\n  let waveWidth = c.width + c.width / 4\r\n  let offset = 0\r\n  let waveHeight = 8\r\n  let waveCount = 5 // 波浪数影响绘图\r\n  let startX = -c.width / 4\r\n  let startY = c.height + 5\r\n  let progress = c.height + 10\r\n  let progressStep = c.height / (180 * 60)\r\n  progressTime.time = progress / (progressStep * 60)\r\n  // progressTime.step = progressStep\r\n  let d2 = waveWidth / waveCount\r\n  let d = d2 / 2\r\n  let hd = d / 2\r\n  let ctx = c.getContext('2d')\r\n  console.log(c.height + '  ' + c.width)\r\n\r\n  function tick () {\r\n    offset -= 2\r\n    progress -= progressStep\r\n    progressTime.time = progress / (progressStep * 60)\r\n    if (progress < 0) return\r\n    if (-1 * offset >= d2) offset = 0\r\n    ctx.fillStyle = '#ffecec'\r\n    ctx.fillRect(0, 0, c.width, c.height)\r\n    let textX = 0\r\n    let textY = c.height / 6\r\n    /** draw count */\r\n    ctx.font = '20px Georgia'\r\n    ctx.fillStyle = '#ccb8ba'\r\n    for (let startCount = 180, i = 0; startCount > 0; i++) {\r\n      if (i < 3) {\r\n        textX = c.width / 2 - (30 / devicePixelRatio)\r\n      } else {\r\n        textX = c.width / 2 - (20 / devicePixelRatio)\r\n      }\r\n      ctx.fillText(startCount + '', textX, textY * i + 15)\r\n      startCount -= 30\r\n    }\r\n    ctx.beginPath()\r\n    ctx.arc(c.width / 2, c.height - 5, 5, 0, 2 * Math.PI)\r\n    ctx.fillStyle = '#ff3636'\r\n    ctx.fill()\r\n\r\n    /** draw wave */\r\n    ctx.beginPath()\r\n    let offsetY = startY - progress\r\n    ctx.moveTo(startX - offset, offsetY)\r\n    for (let i = 0; i < waveCount; i++) {\r\n      let dx = i * d2\r\n      let offsetX = dx + startX - offset\r\n      ctx.quadraticCurveTo(offsetX + hd, offsetY + waveHeight, offsetX + d, offsetY)\r\n      ctx.quadraticCurveTo(offsetX + hd + d, offsetY - waveHeight, offsetX + d2, offsetY)\r\n    }\r\n    ctx.lineTo(startX + waveWidth, c.height)\r\n    ctx.lineTo(startX, c.height)\r\n    ctx.fillStyle = '#94cdf0'\r\n    ctx.fill()\r\n    requestAnimationFrame(tick)\r\n  }\r\n  tick()\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tip-containner\"},[_c('p',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.title))]),_c('div',[_c('div',{staticClass:\"avatar-wrap\"},[_c('img',{attrs:{\"id\":\"like\",\"src\":require(\"../assets/image/icon_like.png\"),\"alt\":\"like\"},on:{\"click\":function($event){_vm.pingJiaFn(0)}}}),_c('span',[_vm._v(\"喜欢,还想聊\")])]),_c('div',{staticClass:\"avatar-wrap\"},[_c('img',{attrs:{\"id\":\"dislike\",\"src\":require(\"../assets/image/icon_hate.png\"),\"alt\":\"hate\"},on:{\"click\":function($event){_vm.pingJiaFn(1)}}}),_c('span',[_vm._v(\"错过吧,告辞\")])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"tip-containner\">\r\n    <p class=\"title\">{{title}}</p>\r\n    <div>\r\n      <div class=\"avatar-wrap\">\r\n        <img id=\"like\" @click=\"pingJiaFn(0)\" src=\"../assets/image/icon_like.png\" alt=\"like\">\r\n        <span>喜欢,还想聊</span>\r\n      </div>\r\n      <div class=\"avatar-wrap\">\r\n        <img id=\"dislike\" @click=\"pingJiaFn(1)\" src=\"../assets/image/icon_hate.png\" alt=\"hate\">\r\n        <span>错过吧,告辞</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: ['title'],\r\n  methods: {\r\n    pingJiaFn (value) {\r\n      this.$emit('pingjia-click', value)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .tip-containner{\r\n    width: 80vw;\r\n    height: 28vh;\r\n    background-color: white;\r\n    border-radius: 16px;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: space-around;\r\n    padding: 1px;\r\n    background: -webkit-linear-gradient( bottom, #fff 0%, #fff 100%), -webkit-linear-gradient( bottom, #60d0e8 0%, #ff8599 100%);\r\n    background-clip: content-box, padding-box;\r\n    z-index: 999;\r\n  }\r\n  .title{\r\n    margin-top: 10px;\r\n    font-family: PingFang-SC-Regular;\r\n    font-size: 2.2vh;\r\n    font-weight: normal;\r\n    font-stretch: normal;\r\n    letter-spacing: 0px;\r\n    color: #dc7474;\r\n  }\r\n  .tip-containner > div{\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-around;\r\n  }\r\n  .avatar-wrap{\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n  .avatar-wrap > img{\r\n    width: 18vw;\r\n    height: 18vw;\r\n    border: 1px solid white;\r\n    border-radius: 50%;\r\n  }\r\n  .avatar-wrap > #like:hover{\r\n    border: 2px solid #ff8599;\r\n  }\r\n  .avatar-wrap > #dislike:hover{\r\n    border: 2px solid #60d0e8;\r\n  }\r\n  .avatar-wrap > span{\r\n    padding: 10px;\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/_cache-loader@1.2.2@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@1.2.0@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.2@babel-loader/lib/index.js!../../node_modules/_cache-loader@1.2.2@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./pingjia.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@1.2.2@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@1.2.0@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.2@babel-loader/lib/index.js!../../node_modules/_cache-loader@1.2.2@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./pingjia.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./pingjia.vue?vue&type=template&id=489e4259&scoped=true&\"\nimport script from \"./pingjia.vue?vue&type=script&lang=js&\"\nexport * from \"./pingjia.vue?vue&type=script&lang=js&\"\nimport style0 from \"./pingjia.vue?vue&type=style&index=0&id=489e4259&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.4.2@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"489e4259\",\n  null\n  \n)\n\ncomponent.options.__file = \"pingjia.vue\"\nexport default component.exports","<template>\r\n    <div class=\"wrap\">\r\n        <canvas id=\"myCanvas\" style=\"border: 0\">Your browser does not support the HTML5 canvas tag.\r\n        </canvas>\r\n        <div class=\"container\">\r\n          <div class=\"title\">\r\n            <img src=\"../assets/image/boy.png\" alt=\"\">\r\n            <p>{{question}}</p>\r\n          </div>\r\n           <ul>\r\n             <li v-for=\"(item, index) of msgs\" :key=\"index\">\r\n               <div :class=\"[item.type === 'send' ? 'send-wrap' : 'recive-wrap']\">\r\n                 <img class=\"head-img\" :src=\"item.type === 'send' ? myAvatar : friendAvatar\" alt=\"headImg\" />\r\n                 <div class=\"message-wrap\">{{item.text}}</div>\r\n               </div>\r\n             </li>\r\n           </ul>\r\n           <div class=\"bt-wrap\">\r\n             <input type=\"text\" name=\"sendText\" v-model=\"msgText\">\r\n             <button id=\"sendBT\" @click=\"sendMsg()\">发送</button>\r\n           </div>\r\n        </div>\r\n        <tip title=\"还剩一分钟哦!\" v-if=\"remainProgress.time < 60 && remainProgress.time >= 59\"></tip>\r\n        <ping-jia v-if=\"remainProgress.time <= 0\" @pingjia-click=\"setPingJIa($event)\" title=\"聊天结束了啦，评价一下TA吧～\"></ping-jia>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport backgroundCanvasFn from '../assets/js/chatCanvas'\r\nimport Tip from '../components/Tip'\r\nimport PingJia from '../components/pingjia'\r\nexport default {\r\n  data () {\r\n    return {\r\n      Ques: [\r\n        '有什么好玩的游戏推荐？',\r\n        '分享一部你最喜欢的电影',\r\n        '这个假期里你经历过什么有意思的事情？',\r\n        '分享一个你自己特有的小技能？',\r\n        '或许可以从你最喜欢的小动物开始聊',\r\n        '介绍介绍你喜欢用的小众app吧！',\r\n        '可以分享一下假期里有意义的事情吗？',\r\n        '夏天你有什么解暑续命大法？',\r\n        '也许可以从聊聊你们的专业开始',\r\n        '或许可以先来聊聊你们最近在看的书？',\r\n        '或许可以从聊喜欢的音乐开始',\r\n        '可以从最近在玩的游戏开始聊',\r\n        '或许可以聊聊你喜不喜欢现在的专业？'\r\n      ],\r\n      question: '',\r\n      message: '1.随机匹配 ，优先男女2.如遇违规,长按举报3.时间不定，喜欢抓紧4.多次好评，无限匹配5.随机奖励，加时续命',\r\n      msgs: [],\r\n      socket: null,\r\n      msgText: '',\r\n      remainProgress: {\r\n        time: 180\r\n      },\r\n      tipStatus: false,\r\n      pingjia: null,\r\n      myAvatar: null,\r\n      friendAvatar: null\r\n    }\r\n  },\r\n  components: {\r\n    Tip,\r\n    PingJia\r\n  },\r\n  methods: {\r\n    getQ () {\r\n      let index = Math.floor((Math.random() * this.Ques.length))\r\n      this.question = this.Ques[index]\r\n    },\r\n    setPingJIa (evt) {\r\n      this.pingjia = evt\r\n      this.$axios.post('/api/evaluate', {\r\n        chatId: this.$store.state.chatId,\r\n        evaluate: this.pingjia\r\n      }).then((res) => {\r\n        if (res.data.code === 0) {\r\n          this.$router.push({ name: 'index', params: { msg: 'pingjia' } })\r\n        } else {\r\n          console.log(res.data.msg)\r\n        }\r\n      }).catch((error) => {\r\n        console.log(error + '')\r\n      })\r\n    },\r\n    initial () {\r\n      this.socket = new WebSocket('ws://120.27.137.151:9976/api/ws?token=' + this.$store.state.token)\r\n      this.socket.onopen = (evt) => {\r\n        document.getElementById('sendBT').disabled = false\r\n      }\r\n      this.socket.onmessage = (evt) => {\r\n        let res = JSON.parse(evt.data)\r\n        this.msgs.push({\r\n          text: res.msg,\r\n          type: 'recive'\r\n        })\r\n        console.log(res)\r\n      }\r\n      this.socket.onerror = (evt) => {\r\n        console.error(evt)\r\n        document.getElementById('sendBT').disabled = true\r\n      }\r\n      this.socket.onclose = (evt) => {\r\n        document.getElementById('sendBT').disabled = true\r\n      }\r\n    },\r\n    sendMsg () {\r\n      if (this.msgText !== '') {\r\n        this.socket.send(this.msgText)\r\n        this.msgs.push({\r\n          text: this.msgText,\r\n          type: 'send'\r\n        })\r\n        this.msgText = ''\r\n      }\r\n    },\r\n    getAvatars () {\r\n      let random = Math.floor(2 * Math.random())\r\n      if (this.$store.state.mySex === 0) {\r\n        this.myAvatar = this.$store.getters.getAvatarArr(random).boy\r\n      } else {\r\n        this.myAvatar = this.$store.getters.getAvatarArr(random).girl\r\n      }\r\n      if (this.$store.state.friendSex === 0) {\r\n        this.friendAvatar = this.$store.getters.getAvatarArr(random).boy\r\n      } else {\r\n        this.friendAvatar = this.$store.getters.getAvatarArr(random).girl\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    remainProgress: {\r\n      handler (newValue, oldValue) {\r\n        if (newValue < 0) {\r\n          this.socket.close()\r\n        }\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  created () {\r\n    this.initial()\r\n    this.getQ()\r\n    this.getAvatars()\r\n  },\r\n  mounted () {\r\n    let node = document.getElementById('myCanvas')\r\n    node.width = window.screen.width\r\n    node.height = window.screen.height\r\n    backgroundCanvasFn(node, this.remainProgress)\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .wrap{\r\n    height: 100vh;\r\n  }\r\n  .container{\r\n    position: absolute;\r\n    top: 0;\r\n    z-index: 1;\r\n    background-color: transparent;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    overflow: hidden;\r\n  }\r\n  .container > ul > li{\r\n    margin: 15px 0;\r\n  }\r\n  .container > ul > li > div{\r\n    display: flex;\r\n  }\r\n  .send-wrap{\r\n    flex-direction: row-reverse;\r\n  }\r\n  .recive-wrap{\r\n    flex-direction: row;\r\n  }\r\n  .head-img{\r\n    width: 15vw;\r\n    height: 15vw;\r\n    border-radius: 50%;\r\n    margin: 0 3vw;\r\n  }\r\n  .message-wrap{\r\n    box-sizing: border-box;\r\n    font-size: 2vh;\r\n    background-color: #ffffff;\r\n    border: 1px solid #ffb5b5;\r\n    border-radius: 8px;\r\n    padding: 6px;\r\n    max-width: 50vw;\r\n    display: flex;\r\n    align-items: center;\r\n    word-break: break-all;\r\n  }\r\n  .title{\r\n    display: flex;\r\n    flex-direction: row;\r\n    max-width: 70vw;\r\n    overflow: hidden;\r\n    height: 8vw;\r\n    background-color: white;\r\n    border: 0;\r\n    border-radius: 5vh;\r\n    margin: 0 auto;\r\n    margin-top: 20px;\r\n    margin-bottom: 20px;\r\n    font-family: PingFang-SC-Regular;\r\n    font-size: 16px;\r\n    font-weight: normal;\r\n    font-stretch: normal;\r\n    letter-spacing: 0px;\r\n    color: #dc7474;\r\n  }\r\n  .title > img{\r\n    width: 8vw;\r\n    height: 8vw;\r\n  }\r\n  .title > p{\r\n    height: 100%;\r\n    padding-left: 2vw;\r\n    line-height: 8vw;\r\n  }\r\n  .bt-wrap{\r\n    width: 90vw;\r\n    position: fixed;\r\n    left: 50%;\r\n    margin-left: -45vw;\r\n    bottom: 4vh;\r\n    display: flex;\r\n    justify-content: space-between;\r\n  }\r\n  .bt-wrap > input{\r\n    width: 75vw;\r\n    height: 5vh;\r\n    border: 0;\r\n    background-color: white;\r\n    border-radius: 8px;\r\n    padding-left: 5px;\r\n    font-family: PingFang-SC-Regular;\r\n    font-size: 1.9vh;\r\n    font-weight: normal;\r\n    font-stretch: normal;\r\n    letter-spacing: 0px;\r\n    color: #666666;\r\n\r\n  }\r\n  .bt-wrap > button{\r\n    width: 12vw;\r\n    height: 5vh;\r\n    border: 0;\r\n    border-radius: 8px;\r\n    background-color: #d66161;\r\n    font-family: PingFang-SC-Regular;\r\n    font-size: 1.9vh;\r\n    font-weight: normal;\r\n    font-stretch: normal;\r\n    letter-spacing: 0px;\r\n    color: #ffffff;\r\n  }\r\n  .bt-wrap > button:disabled{\r\n    background-color: gray;\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/_cache-loader@1.2.2@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@1.2.0@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.2@babel-loader/lib/index.js!../../node_modules/_cache-loader@1.2.2@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@1.2.2@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@1.2.0@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.2@babel-loader/lib/index.js!../../node_modules/_cache-loader@1.2.2@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./chat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./chat.vue?vue&type=template&id=24138ded&scoped=true&\"\nimport script from \"./chat.vue?vue&type=script&lang=js&\"\nexport * from \"./chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chat.vue?vue&type=style&index=0&id=24138ded&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.4.2@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"24138ded\",\n  null\n  \n)\n\ncomponent.options.__file = \"chat.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.4.2@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@1.0.0@css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@1.2.2@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./chat.vue?vue&type=style&index=0&id=24138ded&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.4.2@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@1.0.0@css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@1.2.2@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./chat.vue?vue&type=style&index=0&id=24138ded&scoped=true&lang=css&\""],"sourceRoot":""}